<html lang="en-us"><!-- ▼ Dropdown menu toggle -->
<div class="menu-container">
  <div class="menu-toggle" onclick="toggleMenu()">▼</div>
  <div class="dropdown-menu" id="dropdownMenu">
    <button onclick="window.location.href='https://davcode149.github.io/dd-games/list.html'">Return</button>
  </div>
</div>

<style>
  /* Position menu at top center */
  .menu-container {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
  }

  /* The arrow toggle */
  .menu-toggle {
    background-color: rgba(255, 255, 255, 0.85);
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    text-align: center;
    line-height: 30px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: background-color 0.2s, transform 0.2s;
  }

  .menu-toggle:hover {
    background-color: rgba(240, 240, 240, 0.95);
    transform: scale(1.1);
  }

  /* Dropdown panel */
  .dropdown-menu {
    display: none;
    position: absolute;
    top: 40px;
    right: 0;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    padding: 10px;
    min-width: 120px;
    text-align: center;
    animation: dropdownFade 0.2s ease;
  }

  /* Animation for fade-in */
  @keyframes dropdownFade {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .dropdown-menu button {
    width: 100%;
    padding: 8px 10px;
    border: none;
    border-radius: 6px;
    background-color: #007bff;
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .dropdown-menu button:hover {
    background-color: #0056b3;
  }
</style>

<script>
  function toggleMenu() {
    var menu = document.getElementById("dropdownMenu");
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
  }

  // Optional: Close menu when clicking outside
  window.addEventListener("click", function(e) {
    if (!e.target.closest(".menu-container")) {
      document.getElementById("dropdownMenu").style.display = "none";
    }
  });
</script>
<head><style data-merge-styles="true"></style>   <style data-merge-styles="true"></style><style data-merge-styles="true"></style><meta charset="utf-8"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> <style>html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}html,body{height:100%}canvas{display:block}body{margin:0}#unity-container{width:100%;height:100%;position:relative}#unity-canvas{width:100%;height:100%;background:#231F20}#loading-cover{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}#unity-loading-bar{flex:1 1 auto;display:flex;flex-direction:column;justify-content:center;align-items:center}#unity-logo{text-align:center}#unity-logo img{max-width:80%;max-height:80%}#unity-progress-bar-empty{width:40%;height:24px;margin:10px 20px 20px 10px;text-align:left;border:1px solid white;padding:2px}#unity-progress-bar-full{width:0;height:100%;background:white}.light #unity-progress-bar-empty{border-color:black}.light #unity-progress-bar-full{background:black}.spinner,.spinner:after{border-radius:50%;width:5em;height:5em}.spinner{margin:10px;font-size:10px;position:relative;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,0.2);border-right:1.1em solid rgba(255,255,255,0.2);border-bottom:1.1em solid rgba(255,255,255,0.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:spinner-spin 1.1s infinite linear}@keyframes spinner-spin{0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)}}</style> <style> body{overflow:hidden;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}</style> <style type="text/css">#button {   display:none; } .imgb_vis {   animation: imgb-animation 7s linear; } @keyframes imgb-animation {   10% {     transform: translateX(0);   }   20% {     transform: translateX(100px);   }   90% {     transform: translateX(100px);   }   100% {     transform: translateX(0);   } }</style><title>Melon Playground Game Files</title><meta name="robots" content="index, follow"><link rel="canonical" href="https://eggy-car.github.io/more-game/melon-playground.html"></head> <body class="dark"> <div id="unity-container" class="unity-desktop"> <canvas id="unity-canvas" width="1366" height="599" style="cursor: default;"></canvas> </div> <div id="loading-cover" style="display: none;"> <div id="unity-loading-bar"> <div id="unity-progress-bar-empty" style=""> <div id="unity-progress-bar-full" style="width: 100%;"></div> </div> <div class="spinner" style="display: none;"></div> </div> </div> <script>
const hideFullScreenButton="";const buildUrl="main";const loaderUrl=buildUrl+"/Builds.loader.js";const config={dataUrl:buildUrl+"/Builds.data.unityweb",frameworkUrl:buildUrl+"/Builds.framework.js.unityweb",codeUrl:buildUrl+"/Builds.wasm.unityweb",streamingAssetsUrl:"/StreamingAssets",};const container=document.querySelector("#unity-container");const canvas=document.querySelector("#unity-canvas");const loadingCover=document.querySelector("#loading-cover");const progressBarEmpty=document.querySelector("#unity-progress-bar-empty");const progressBarFull=document.querySelector("#unity-progress-bar-full");const spinner=document.querySelector('.spinner');const canFullscreen=(function(){for(const key of['exitFullscreen','webkitExitFullscreen','webkitCancelFullScreen','mozCancelFullScreen','msExitFullscreen',]){if(key in document){return true}}return false}());if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){container.className="unity-mobile"}loadingCover.style.display="";canvas.addEventListener("touchstart",()=>{window.focus()});canvas.addEventListener("pointerdown",()=>{window.focus()});let player;let leaderboard;let myGameInstance=null;let payments=null;let promptCanShow=false;let reviewCanShow=false;let initSDK=true;let initGame=true;let photoSizeForInit;let scopesForInit;let nowFullAdOpen=false;let letGameReadyApi=true;let ysdk=null;const script=document.createElement("script");script.src=loaderUrl;script.onload=()=>{createUnityInstance(canvas,config,(progress)=>{spinner.style.display="none";progressBarEmpty.style.display="";progressBarFull.style.width=`${100*progress}%`}).then((unityInstance)=>{myGameInstance=unityInstance;loadingCover.style.display="none"}).catch((message)=>{})};var playerData='noData';var environmentData='null';var cloudSaves='noData';function InitSDK(photoSize,scopes){console.log('Init GAME');initGame=true;photoSizeForInit=photoSize;scopesForInit=scopes;InitPlayer(photoSize,scopes)}
function InitGame(photoSize,scopes,gameReadyApi){console.log('Init GAME');initGame=true;photoSizeForInit=photoSize;scopesForInit=scopes;if(initSDK==true){if(gameReadyApi==true)GameReadyAPI();InitPlayer(photoSize,scopes)}else{InitYandex();setTimeout(function(){if(!initSDK){console.error('CRASH InitYandex');NotAuthorized()}},1000)}if(nowFullAdOpen==true){myGameInstance.SendMessage('YandexGame','OpenFullAd')}} 
function GameReadyAPI(){if(letGameReadyApi){}}function NotAuthorized(){try{console.log('Authorized failed');let authJson={"playerAuth":"rejected","playerName":"unauthorized","playerId":"unauthorized","playerPhoto":"null"};myGameInstance.SendMessage('YandexGame','SetInitializationSDK',JSON.stringify(authJson))}catch(e){console.error('CRASH Not Authorized: ',e.message)}}function InitPlayer(photoSize,_scopes){NotAuthorized();window.focus()}function OpenAuthDialog(photoSize,scopes){try{ysdk.auth.openAuthDialog().then(()=>{InitPlayer(photoSize,scopes)}).catch(()=>{InitSDK(photoSize,scopes)})}catch(e){console.log('CRASH Open Auth Dialog: ',e.message)}}
function FullAdShow(){try{window.ysdk.adv.showFullscreenAdv({callbacks:{onOpen:()=>{console.log('Open Fullscreen Ad');nowFullAdOpen=true;if(initGame===true)myGameInstance.SendMessage('YandexGame','OpenFullAd')},onClose:(wasShown)=>{nowFullAdOpen=false;if(initGame===true){if(wasShown){myGameInstance.SendMessage('YandexGame','CloseFullAd','true')}else{myGameInstance.SendMessage('YandexGame','CloseFullAd','false')}}window.focus()},onError:(error)=>{console.error('Error Fullscreen Ad',error);myGameInstance.SendMessage('YandexGame','ErrorFullAd');window.focus()}}})}catch(e){console.error('CRASH FullAd Show: ',e.message)}}
function RewardedShow(id){try{window.ysdk.adv.showRewardedVideo({callbacks:{onOpen:()=>{console.log('Opened Video Ad. Id: '+id);myGameInstance.SendMessage('YandexGame','OpenVideo')},onClose:()=>{console.log('Closed Video Ad. Id: '+id);myGameInstance.SendMessage('YandexGame','CloseVideo');window.focus()},onRewarded:()=>{console.log('Reward Video Ad. Id: '+id);myGameInstance.SendMessage('YandexGame','RewardVideo',id)},onError:(e)=>{console.error('Error Video Ad. Id: '+id,e);myGameInstance.SendMessage('YandexGame','ErrorVideo')}}})}catch(err){console.error('CRASH Rewarded Video Ad Show: ',err.message)}}
function StickyAdActivity(show){try{ysdk.adv.getBannerAdvStatus().then(({stickyAdvIsShowing,reason})=>{if(stickyAdvIsShowing){if(!show){ysdk.adv.hideBannerAdv()}}else if(reason){console.log('Sticky ad are not shown. Reason:',reason)}else if(show){ysdk.adv.showBannerAdv()}})}catch(e){console.error('CRASH Sticky Activity: ',e.message)}}
function InitPayments(){try{ysdk.getPayments().then(_payments=>{console.log('Purchases are available');payments=_payments}).catch(e=>{console.log('Purchases are not available',e.message)})}catch(e){console.error('CRASH Init Payments: ',e.message)}}
function BuyPayments(id){try{if(payments!=null){payments.purchase(id).then(()=>{console.log('Purchase Success');ConsumePurchase(id);window.focus()}).catch(e=>{console.error('Purchase Failed',e.message);myGameInstance.SendMessage('YandexGame','OnPurchaseFailed',id);window.focus()})}else{console.log('Payments == null')}}catch(e){console.error('CRASH Buy Payments: ',e.message);window.focus()}}
function GetPayments(){try{if(payments!=null){payments.getCatalog().then(products=>{let productID=[];let title=[];let description=[];let imageURI=[];let priceValue=[];let consumed=[];payments.getPurchases().then(purchases=>{for(let i=0;i<products.length;i++){productID[i]=products[i].id;title[i]=products[i].title;description[i]=products[i].description;imageURI[i]=products[i].imageURI;priceValue[i]=products[i].priceValue;consumed[i]=true;for(i2=0;i2<purchases.length;i2++){if(purchases[i2].productID===productID[i]){consumed[i]=false;break}}}let jsonPayments={"id":productID,"title":title,"description":description,"imageURI":imageURI,"priceValue":priceValue,"consumed":consumed};myGameInstance.SendMessage('YandexGame','PaymentsEntries',JSON.stringify(jsonPayments))})})}else{console.log('Get Payments: payments == null')}}catch(e){console.error('CRASH Get Payments: ',e.message)}}
function ConsumePurchase(id){try{if(payments!=null){payments.getPurchases().then(purchases=>{for(i=0;i<purchases.length;i++){if(purchases[i].productID===id){payments.consumePurchase(purchases[i].purchaseToken);myGameInstance.SendMessage('YandexGame','OnPurchaseSuccess',id)}}})}else console.log('Consume purchase: payments null')}catch(e){console.error('CRASH Consume Purchase: ',e.message)}}
function ConsumePurchases(){try{if(payments!=null){payments.getPurchases().then(purchases=>{console.log('Unprocessed purchases: ',purchases.length);for(i=0;i<purchases.length;i++){payments.consumePurchase(purchases[i].purchaseToken);myGameInstance.SendMessage('YandexGame','OnPurchaseSuccess',purchases[i].productID)}})}else console.log('Consume purchases: payments null')}catch(e){console.error('CRASH Consume purchases: ',e.message)}}
function SaveCloud(jsonData,flush){try{player.setData({saves:[jsonData],},flush)}catch(e){console.error('CRASH Save Cloud: ',e.message)}}function LoadCloud(){try{player.getData(["saves"]).then(data=>{if(data.saves){myGameInstance.SendMessage('YandexGame','SetLoadSaves',JSON.stringify(data.saves))}else{myGameInstance.SendMessage('YandexGame','SetLoadSaves',"noData")}}).catch(()=>{console.error('getData Error!');myGameInstance.SendMessage('YandexGame','SetLoadSaves',"noData")})}catch(e){console.error('CRASH Load saves Cloud: ',e.message);myGameInstance.SendMessage('YandexGame','SetLoadSaves',"noData")}}
            function InitLeaderboard() {
                try {
                    ysdk.getLeaderboards().then(_lb => {
                        leaderboard = _lb
                        myGameInstance.SendMessage('YandexGame', 'InitializedLB');
                    });
                } catch (e) {
                    console.error('CRASH Init Leaderboard: ', e.message);
                }
            }
            function SetLeaderboardScores(_name, score) {
                try {
                    ysdk.getLeaderboards()
                        .then(leaderboard => {
                            leaderboard.setLeaderboardScore(_name, score);
                        });
                } catch (e) {
                    console.error('CRASH Set Leader board Scores: ', e.message);
                }
            }
function GetLeaderboardScores(nameLB,maxPlayers,quantityTop,quantityAround,photoSize,auth){try{var jsonEntries={technoName:'',isDefault:false,isInvertSortOrder:false,decimalOffset:0,type:''};ysdk.getLeaderboards().then(leaderboard=>leaderboard.getLeaderboardDescription(nameLB)).then(res=>{jsonEntries.technoName=nameLB;jsonEntries.isDefault=res.default;jsonEntries.isInvertSortOrder=res.description.invert_sort_order;jsonEntries.decimalOffset=res.description.score_format.options.decimal_offset;jsonEntries.type=res.description.type;return leaderboard.getLeaderboardEntries(nameLB,{quantityTop:quantityTop,includeUser:auth,quantityAround:quantityAround})}).then(res=>{let jsonPlayers=EntriesLB(res,maxPlayers,photoSize);let combinedJson={...jsonEntries,...jsonPlayers};myGameInstance.SendMessage('YandexGame','LeaderboardEntries',JSON.stringify(combinedJson))}).catch(error=>{console.error(error)})}catch(e){console.error('CRASH Get Leaderboard: ',e.message)}}       
function EntriesLB(res,maxPlayers,photoSize){let LeaderboardEntriesText='';let playersCount;if(res.entries.length<maxPlayers){playersCount=res.entries.length}else{playersCount=maxPlayers}let ranks=new Array(playersCount);let photos=new Array(playersCount);let mames=new Array(playersCount);let scores=new Array(playersCount);let uniqueIDs=new Array(playersCount);for(i=0;i<playersCount;i++){ranks[i]=res.entries[i].rank;scores[i]=res.entries[i].score;uniqueIDs[i]=res.entries[i].player.uniqueID;if(photoSize==='nonePhoto'||res.entries[i].player.scopePermissions.avatar!=="allow"){photos[i]='nonePhoto'}else{photos[i]=res.entries[i].player.getAvatarSrc(photoSize)}if(res.entries[i].player.scopePermissions.public_name!=="allow"){mames[i]="anonymous"}else{mames[i]=res.entries[i].player.publicName}LeaderboardEntriesText+=ranks[i]+'. '+mames[i]+": "+scores[i]+'\n'}if(playersCount===0){LeaderboardEntriesText='no data'}let jsonPlayers={"entries":LeaderboardEntriesText,"ranks":ranks,"photos":photos,"names":mames,"scores":scores,"uniqueIDs":uniqueIDs};return jsonPlayers}
function LanguageRequest(){try{myGameInstance.SendMessage('YandexGame','SetLanguage','en')}catch(e){}}function RequestingEnvironmentData(){try{let jsonEnvir={"language":'en',};myGameInstance.SendMessage('YandexGame','SetEnvironmentData',JSON.stringify(jsonEnvir))}catch(e){console.error('CRASH Requesting Environment Data: ',e.message)}}      
function Review(){try{ysdk.feedback.canReview().then(({value,reason})=>{if(value){ysdk.feedback.requestReview().then(({feedbackSent})=>{console.log('feedbackSent ',feedbackSent);if(feedbackSent){myGameInstance.SendMessage('YandexGame','ReviewSent','true');console.log('Review left')}else{myGameInstance.SendMessage('YandexGame','ReviewSent','false');console.log('Review not left',reason)}window.focus()})}else{console.log('Review can show = false',reason);window.focus()}})}catch(e){console.error('CRASH Review: ',e.message);window.focus()}}   
function PromptShow(){try{ysdk.shortcut.showPrompt().then(result=>{console.log('Shortcut created?:',result);if(result.outcome==='accepted'){console.log('Prompt Success');myGameInstance.SendMessage('YandexGame','OnPromptSuccess')}else{myGameInstance.SendMessage('YandexGame','OnPromptFail')}window.focus()})}catch(e){console.error('CRASH Prompt Show: ',e.message);window.focus()}}   
function PaintRBT(rbt){try{document.getElementById(rbt).style.background='#ff0000'}catch(e){console.error('CRASH Paint RBT: ',e.message)}}function StaticRBTDeactivate(){}document.body.appendChild(script);
</script><script src="main/Builds.loader.js"></script><script src="main/Builds.loader.js"></script><script src="https://eggy-car.github.io/site-scripts/frame.js"></script><script src="blob:https://truffled.lol/a71823f9-65e2-467d-b7b0-e86bc463c151"></script></body><editor-card style="position:absolute;top:0px;left:0px;z-index:auto;display: block !important"><div dir="ltr" style="all: initial;"><div style="color-scheme: initial; forced-color-adjust: initial; mask: initial; math-depth: initial; position: absolute; position-anchor: initial; text-size-adjust: initial; appearance: initial; color: initial; font: initial; font-palette: initial; font-synthesis: initial; position-area: initial; text-orientation: initial; text-rendering: initial; text-spacing-trim: initial; -webkit-font-smoothing: initial; -webkit-locale: initial; -webkit-text-orientation: initial; -webkit-writing-mode: initial; writing-mode: initial; zoom: initial; accent-color: initial; place-content: initial; place-items: initial; place-self: initial; alignment-baseline: initial; anchor-name: initial; anchor-scope: initial; animation-composition: initial; animation: initial; app-region: initial; aspect-ratio: initial; backdrop-filter: initial; backface-visibility: initial; background: initial; background-blend-mode: initial; baseline-shift: initial; baseline-source: initial; block-size: initial; border-block: initial; border: initial; border-radius: initial; border-collapse: initial; border-end-end-radius: initial; border-end-start-radius: initial; border-inline: initial; border-start-end-radius: initial; border-start-start-radius: initial; inset: initial; box-decoration-break: initial; box-shadow: initial; box-sizing: initial; break-after: initial; break-before: initial; break-inside: initial; buffered-rendering: initial; caption-side: initial; caret-animation: initial; caret-color: initial; clear: initial; clip: initial; clip-path: initial; clip-rule: initial; color-interpolation: initial; color-interpolation-filters: initial; color-rendering: initial; columns: initial; column-fill: initial; gap: initial; column-rule: initial; column-span: initial; contain: initial; contain-intrinsic-block-size: initial; contain-intrinsic-size: initial; contain-intrinsic-inline-size: initial; container: initial; content: initial; content-visibility: initial; corner-shape: initial; corner-block-end-shape: initial; corner-block-start-shape: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; cursor: initial; cx: initial; cy: initial; d: initial; display: initial; dominant-baseline: initial; dynamic-range-limit: initial; empty-cells: initial; field-sizing: initial; fill: initial; fill-opacity: initial; fill-rule: initial; filter: initial; flex: initial; flex-flow: initial; float: initial; flood-color: initial; flood-opacity: initial; grid: initial; grid-area: initial; height: initial; hyphenate-character: initial; hyphenate-limit-chars: initial; hyphens: initial; image-orientation: initial; image-rendering: initial; initial-letter: initial; inline-size: initial; inset-block: initial; inset-inline: initial; interpolate-size: initial; isolation: initial; letter-spacing: initial; lighting-color: initial; line-break: initial; list-style: initial; margin-block: initial; margin: initial; margin-inline: initial; marker: initial; mask-type: initial; math-shift: initial; math-style: initial; max-block-size: initial; max-height: initial; max-inline-size: initial; max-width: initial; min-block-size: initial; min-height: initial; min-inline-size: initial; min-width: initial; mix-blend-mode: initial; object-fit: initial; object-position: initial; object-view-box: initial; offset: initial; opacity: initial; order: initial; orphans: initial; outline: initial; outline-offset: initial; overflow-anchor: initial; overflow-block: initial; overflow-clip-margin: initial; overflow-inline: initial; overflow-wrap: initial; overflow: initial; overlay: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; overscroll-behavior: initial; padding-block: initial; padding: initial; padding-inline: initial; page: initial; page-orientation: initial; paint-order: initial; perspective: initial; perspective-origin: initial; pointer-events: initial; position-try: initial; position-visibility: initial; print-color-adjust: initial; quotes: initial; r: initial; reading-flow: initial; reading-order: initial; resize: initial; rotate: initial; ruby-align: initial; ruby-position: initial; rx: initial; ry: initial; scale: initial; scroll-behavior: initial; scroll-initial-target: initial; scroll-margin-block: initial; scroll-margin: initial; scroll-margin-inline: initial; scroll-marker-group: initial; scroll-padding-block: initial; scroll-padding: initial; scroll-padding-inline: initial; scroll-snap-align: initial; scroll-snap-stop: initial; scroll-snap-type: initial; scroll-target-group: initial; scroll-timeline: initial; scrollbar-color: initial; scrollbar-gutter: initial; scrollbar-width: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; shape-rendering: initial; size: initial; speak: initial; stop-color: initial; stop-opacity: initial; stroke: initial; stroke-dasharray: initial; stroke-dashoffset: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-width: initial; tab-size: initial; table-layout: initial; text-align: initial; text-align-last: initial; text-anchor: initial; text-autospace: initial; text-box: initial; text-combine-upright: initial; text-decoration: initial; text-decoration-skip-ink: initial; text-emphasis: initial; text-emphasis-position: initial; text-indent: initial; text-overflow: initial; text-shadow: initial; text-transform: initial; text-underline-offset: initial; text-underline-position: initial; text-wrap: initial; timeline-scope: initial; touch-action: initial; transform: initial; transform-box: initial; transform-origin: initial; transform-style: initial; transition: initial; translate: initial; user-select: initial; vector-effect: initial; vertical-align: initial; view-timeline: initial; view-transition-class: initial; view-transition-group: initial; view-transition-name: initial; visibility: initial; border-spacing: initial; -webkit-box-align: initial; -webkit-box-decoration-break: initial; -webkit-box-direction: initial; -webkit-box-flex: initial; -webkit-box-ordinal-group: initial; -webkit-box-orient: initial; -webkit-box-pack: initial; -webkit-box-reflect: initial; -webkit-line-break: initial; -webkit-line-clamp: initial; -webkit-mask-box-image: initial; -webkit-rtl-ordering: initial; -webkit-ruby-position: initial; -webkit-tap-highlight-color: initial; -webkit-text-combine: initial; -webkit-text-decorations-in-effect: initial; -webkit-text-fill-color: initial; -webkit-text-security: initial; -webkit-text-stroke: initial; -webkit-user-drag: initial; white-space-collapse: initial; widows: initial; width: initial; will-change: initial; word-break: initial; word-spacing: initial; x: initial; y: initial; z-index: 2147483647;"><link rel="stylesheet" href="chrome-extension://gpaiobkfhnonedkhhfjpmhdalgeoebfa/fonts/fabric-icons.css"><div style="all: initial;"></div></div><div style="color-scheme: initial; forced-color-adjust: initial; mask: initial; math-depth: initial; position: absolute; position-anchor: initial; text-size-adjust: initial; appearance: initial; color: initial; font: initial; font-palette: initial; font-synthesis: initial; position-area: initial; text-orientation: initial; text-rendering: initial; text-spacing-trim: initial; -webkit-font-smoothing: initial; -webkit-locale: initial; -webkit-text-orientation: initial; -webkit-writing-mode: initial; writing-mode: initial; zoom: initial; accent-color: initial; place-content: initial; place-items: initial; place-self: initial; alignment-baseline: initial; anchor-name: initial; anchor-scope: initial; animation-composition: initial; animation: initial; app-region: initial; aspect-ratio: initial; backdrop-filter: initial; backface-visibility: initial; background: initial; background-blend-mode: initial; baseline-shift: initial; baseline-source: initial; block-size: initial; border-block: initial; border: initial; border-radius: initial; border-collapse: initial; border-end-end-radius: initial; border-end-start-radius: initial; border-inline: initial; border-start-end-radius: initial; border-start-start-radius: initial; inset: initial; box-decoration-break: initial; box-shadow: initial; box-sizing: initial; break-after: initial; break-before: initial; break-inside: initial; buffered-rendering: initial; caption-side: initial; caret-animation: initial; caret-color: initial; clear: initial; clip: initial; clip-path: initial; clip-rule: initial; color-interpolation: initial; color-interpolation-filters: initial; color-rendering: initial; columns: initial; column-fill: initial; gap: initial; column-rule: initial; column-span: initial; contain: initial; contain-intrinsic-block-size: initial; contain-intrinsic-size: initial; contain-intrinsic-inline-size: initial; container: initial; content: initial; content-visibility: initial; corner-shape: initial; corner-block-end-shape: initial; corner-block-start-shape: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; cursor: initial; cx: initial; cy: initial; d: initial; display: initial; dominant-baseline: initial; dynamic-range-limit: initial; empty-cells: initial; field-sizing: initial; fill: initial; fill-opacity: initial; fill-rule: initial; filter: initial; flex: initial; flex-flow: initial; float: initial; flood-color: initial; flood-opacity: initial; grid: initial; grid-area: initial; height: initial; hyphenate-character: initial; hyphenate-limit-chars: initial; hyphens: initial; image-orientation: initial; image-rendering: initial; initial-letter: initial; inline-size: initial; inset-block: initial; inset-inline: initial; interpolate-size: initial; isolation: initial; letter-spacing: initial; lighting-color: initial; line-break: initial; list-style: initial; margin-block: initial; margin: initial; margin-inline: initial; marker: initial; mask-type: initial; math-shift: initial; math-style: initial; max-block-size: initial; max-height: initial; max-inline-size: initial; max-width: initial; min-block-size: initial; min-height: initial; min-inline-size: initial; min-width: initial; mix-blend-mode: initial; object-fit: initial; object-position: initial; object-view-box: initial; offset: initial; opacity: initial; order: initial; orphans: initial; outline: initial; outline-offset: initial; overflow-anchor: initial; overflow-block: initial; overflow-clip-margin: initial; overflow-inline: initial; overflow-wrap: initial; overflow: initial; overlay: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; overscroll-behavior: initial; padding-block: initial; padding: initial; padding-inline: initial; page: initial; page-orientation: initial; paint-order: initial; perspective: initial; perspective-origin: initial; pointer-events: initial; position-try: initial; position-visibility: initial; print-color-adjust: initial; quotes: initial; r: initial; reading-flow: initial; reading-order: initial; resize: initial; rotate: initial; ruby-align: initial; ruby-position: initial; rx: initial; ry: initial; scale: initial; scroll-behavior: initial; scroll-initial-target: initial; scroll-margin-block: initial; scroll-margin: initial; scroll-margin-inline: initial; scroll-marker-group: initial; scroll-padding-block: initial; scroll-padding: initial; scroll-padding-inline: initial; scroll-snap-align: initial; scroll-snap-stop: initial; scroll-snap-type: initial; scroll-target-group: initial; scroll-timeline: initial; scrollbar-color: initial; scrollbar-gutter: initial; scrollbar-width: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; shape-rendering: initial; size: initial; speak: initial; stop-color: initial; stop-opacity: initial; stroke: initial; stroke-dasharray: initial; stroke-dashoffset: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-width: initial; tab-size: initial; table-layout: initial; text-align: initial; text-align-last: initial; text-anchor: initial; text-autospace: initial; text-box: initial; text-combine-upright: initial; text-decoration: initial; text-decoration-skip-ink: initial; text-emphasis: initial; text-emphasis-position: initial; text-indent: initial; text-overflow: initial; text-shadow: initial; text-transform: initial; text-underline-offset: initial; text-underline-position: initial; text-wrap: initial; timeline-scope: initial; touch-action: initial; transform: initial; transform-box: initial; transform-origin: initial; transform-style: initial; transition: initial; translate: initial; user-select: initial; vector-effect: initial; vertical-align: initial; view-timeline: initial; view-transition-class: initial; view-transition-group: initial; view-transition-name: initial; visibility: initial; border-spacing: initial; -webkit-box-align: initial; -webkit-box-decoration-break: initial; -webkit-box-direction: initial; -webkit-box-flex: initial; -webkit-box-ordinal-group: initial; -webkit-box-orient: initial; -webkit-box-pack: initial; -webkit-box-reflect: initial; -webkit-line-break: initial; -webkit-line-clamp: initial; -webkit-mask-box-image: initial; -webkit-rtl-ordering: initial; -webkit-ruby-position: initial; -webkit-tap-highlight-color: initial; -webkit-text-combine: initial; -webkit-text-decorations-in-effect: initial; -webkit-text-fill-color: initial; -webkit-text-security: initial; -webkit-text-stroke: initial; -webkit-user-drag: initial; white-space-collapse: initial; widows: initial; width: initial; will-change: initial; word-break: initial; word-spacing: initial; x: initial; y: initial; z-index: 2147483647;"><link rel="stylesheet" href="chrome-extension://gpaiobkfhnonedkhhfjpmhdalgeoebfa/fonts/fabric-icons.css"></div></div></editor-card>
<!-- Active User Tracker (No Display) -->
<script src="https://cdn.ably.io/lib/ably.min-1.js"></script>
<script>
  // === 1️⃣ Persistent browser ID ===
  let browserId = localStorage.getItem('ablyBrowserId');
  if (!browserId) {
    browserId = 'browser-' + Math.random().toString(36).substring(2, 10);
    localStorage.setItem('ablyBrowserId', browserId);
  }

  // === 2️⃣ Connect to Ably ===
  const ably = new Ably.Realtime({
    key: 'f4iV1g.CdzItg:DMBDb8oONqNtkeH6dq25U4DYKAfd-7GQ6uEKXuqUJVw',
    clientId: browserId
  });
  const channel = ably.channels.get('site-active-users');

  // === 3️⃣ Shared-tab logic (one connection per browser) ===
  const isMainTabKey = "ablyMainTabActive";
  const heartbeatKey = "ablyHeartbeat";
  const heartbeatInterval = 3000; // ms

  function setMainTab(active) {
    if (active) {
      localStorage.setItem(isMainTabKey, "true");
      localStorage.setItem(heartbeatKey, Date.now());
    } else {
      localStorage.removeItem(isMainTabKey);
      localStorage.removeItem(heartbeatKey);
    }
  }

  function isMainTab() {
    const lastBeat = parseInt(localStorage.getItem(heartbeatKey) || "0");
    return Date.now() - lastBeat < heartbeatInterval * 2;
  }

  // === 4️⃣ Keep heartbeat alive for main tab ===
  setInterval(() => {
    if (localStorage.getItem(isMainTabKey) === "true") {
      localStorage.setItem(heartbeatKey, Date.now());
    }
  }, heartbeatInterval);

  // === 5️⃣ Only first tab joins presence ===
  async function tryEnterPresence() {
    if (!isMainTab()) {
      setMainTab(true);
      try {
        await channel.attach();
        channel.presence.enter("online");
      } catch (err) {
        console.error("Error entering presence:", err);
      }
    }
  }

  // === 6️⃣ Detect other tabs closing/opening ===
  window.addEventListener("storage", async (event) => {
    if (event.key === heartbeatKey) {
      if (!isMainTab()) {
        tryEnterPresence();
      }
    }
  });

  // === 7️⃣ Leave presence when main tab closes ===
  window.addEventListener("beforeunload", () => {
    if (isMainTab()) {
      channel.presence.leave("online");
      setMainTab(false);
    }
  });

  // === 8️⃣ Connect ===
  ably.connection.once("connected", tryEnterPresence);
</script>
<script src="/dd-games/assets/management.js"></script>
</html>