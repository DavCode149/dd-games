<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access Restricted</title>

<style>
  :root {
    --bg: #f8f9fb;
    --card-bg: #fff;
    --border: #e5e7eb;
    --text: #111827;
    --muted: #6b7280;
    --accent: #d93b32;
  }

  body {
    margin: 0;
    height: 100vh;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Inter, Arial, sans-serif;
    color: var(--text);
  }

  .card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    box-shadow: 0 6px 22px rgba(0,0,0,0.06);
    border-radius: 10px;
    padding: 40px 50px;
    width: min(400px, 90%);
    text-align: center;
  }

  input[type="password"] {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 8px;
    outline: none;
    font-size: 15px;
  }

  button {
    width: 100%;
    margin-top: 18px;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 10px 0;
    font-size: 15px;
    cursor: pointer;
  }

  .error {
    color: #c53030;
    font-size: 13px;
    margin-top: 10px;
    display: none;
  }
</style>
</head>

<body>
  <div class="card">
    <h1>Access Restricted</h1>
    <p>Please enter the access password.</p>

    <input id="pw" type="password" placeholder="Enter password" autocomplete="off">
    <button onclick="verify()">Continue</button>

    <div id="err" class="error">Incorrect password.</div>
  </div>

<script>
/* ===============================
   ðŸ” SALT SPLIT (DO NOT MERGE)
================================ */
const S1 = "7xQ!";
const S2 = "91zK";
const S3 = "@p";

/* ===============================
   ðŸ” REAL HASH (SHA-256)
   hash("cooked" + S1+S2+S3)
================================ */
const hash362 =
  "d03a9b62305a0a7f5beebb1b087ec53da7362693382491d54a481378a436d1d4";

/* ===============================
   ðŸª¤ DECOY HASHES (TRAPS)
================================ */
const hash817 = [
  "a94a8fe5ccb19ba61c4c0873d391e987982fbbd3",
  "2aae6c35c94fcfb415dbe95f408b9ce91ee846ed",
  "5e884898da28047151d0e56f8dc6292773603d0d"
];

/* ===============================
   ðŸ§  STATE
================================ */
let attempts = 0;
const MAX_ATTEMPTS = 6;

/* ===============================
   ðŸ” HASH FUNCTION
================================ */
async function sha256(text) {
  const data = new TextEncoder().encode(text);
  const hashBuffer = await crypto.subtle.digest("SHA-256", data);
  return Array.from(new Uint8Array(hashBuffer))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

/* ===============================
   ðŸ” VERIFY LOGIC
================================ */
async function verify() {
  const input = pw.value.trim();
  const error = err;

  attempts++;

  // Lockout
  if (attempts > MAX_ATTEMPTS) {
    error.textContent = "Too many attempts. Try later.";
    error.style.display = "block";
    pw.disabled = true;
    return;
  }

  // Delay to slow brute force
  await new Promise(r => setTimeout(r, 900));

  // Fake branch (trap)
  if (input.length === 42) {
    await sha256(input + "fake");
  }

  // Build salt dynamically
  const salt =
    S1 +
    (input.length > 2 ? S2 : "") +
    S3;

  const hash = await sha256(input + salt);

  // Decoy checks (waste time)
  if (hash817.includes(hash)) {
    error.style.display = "block";
    return;
  }

  // REAL CHECK
  if (hash === hash362) {
    window.location.href = "/dd-games/main.html";
  } else {
    error.style.display = "block";
  }
}

/* Enter key support */
pw.addEventListener("keypress", e => {
  if (e.key === "Enter") verify();
});
</script>
</body>
</html>
